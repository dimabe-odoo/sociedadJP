<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <data>
        <record id="custom_work_entry_cl" model="hr.work.entry.type">
            <field name="name">Tipo Entrada Chile</field>
            <field name="code">CL</field>
            <field name="round_days">NO</field>
        </record>
        <record id="custom_hr_payroll_structure_type_cl" model="hr.payroll.structure.type">
            <field name="name">Codigo del Trabajo Chile</field>
            <field name="country_id">46</field>
            <field name="wage_type">monthly</field>
            <field name="default_schedule_pay">monthly</field>
            <field name="default_work_entry_type_id" ref="custom_work_entry_cl"/>
        </record>
        <record id="custom_hr_payroll_structure_cl" model="hr.payroll.structure">
            <field name="name">Codigo del Trabajo Chile</field>
            <field name="type_id" ref="custom_hr_payroll_structure_type_cl"/>
            <field name="country_id">46</field>
        </record>
        <record id="custom_hr_salary_rule_category_taxable" model="hr.salary.rule.category">
            <field name="name">Imponible</field>
            <field name="code">IMP</field>
        </record>
        <record id="custom_hr_salary_rule_category_not_taxable" model="hr.salary.rule.category">
            <field name="name">No Imponible</field>
            <field name="code">NOTIMP</field>
        </record>
        <record id="custom_hr_salary_rule_category_discount" model="hr.salary.rule.category">
            <field name="name">Descuentos</field>
            <field name="code">DES</field>
        </record>
        <record id="custom_hr_salary_rule_category_other_discount" model="hr.salary.rule.category">
            <field name="name">Otros Descuentos</field>
            <field name="code">ODES</field>
        </record>
        <record id="custom_hr_salary_rule_category_company_contribution" model="hr.salary.rule.category">
            <field name="name">Aporte Empresa</field>
            <field name="code">COM</field>
        </record>
        <record id="custom_hr_salary_rule_forecast" model="hr.salary.rule.category">
            <field name="name">Prevision</field>
            <field name="code">PREV</field>
        </record>
        <record id="custom_hr_salary_rule_health" model="hr.salary.rule.category">
            <field name="name">Salud</field>
            <field name="code">SAL</field>
        </record>
        <record id="custom_hr_salary_rule_subtotal" model="hr.salary.rule.category">
            <field name="name">SubTotal</field>
            <field name="code">SUBT</field>
        </record>
        <record id="custom_hr_salary_rule_wage_cl" model="hr.salary.rule">
            <field name="name">Sueldo Base</field>
            <field name="code">SUELDO</field>
            <field name="category_id" ref="custom_hr_salary_rule_category_taxable" />
            <field name="struct_id" ref="custom_hr_payroll_structure_cl"/>
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = round((contract.wage / 30) * worked_days.WORK100.number_of_days)
            </field>
        </record>
        <record id="custom_hr_salary_rule_wage_adjustment" model="hr.salary.rule">
            <field name="name">Ajuste Ley Sueldo Base</field>
            <field name="code">ALSB</field>
            <field name="category_id" ref="custom_hr_salary_rule_category_taxable"/>
            <field name="struct_id" ref="custom_hr_payroll_structure_cl"/>
            <field name="condition_select">python</field>
            <field name="condition_python">result = payslip.indicator_id.mapped('data_ids').filtered(lambda a: a.type == '5')[0].value > contract.wage</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = round(((payslip.indicator_id.mapped('data_ids').filtered(lambda a: a.type == '5')[0].value - contract.wage) / 30) * worked_days.WORK100.number_of_days)</field>
        </record>
        <record id="custom_hr_salary_rule_extra_hours" model="hr.salary.rule">
            <field name="name">Horas Extra</field>
            <field name="code">HEX50</field>
            <field name="category_id" ref="custom_hr_salary_rule_category_taxable"/>
            <field name="struct_id" ref="custom_hr_payroll_structure_cl"/>
            <field name="condition_select">python</field>
            <field name="condition_python">result = inputs.HEX50 and inputs.HEX50.amount > 0</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = round(0.0077777*contract.wage*inputs.HEX50.amount)</field>
        </record>
        <record id="custom_hr_salary_rule_discount_hours" model="hr.salary.rule">
            <field name="name">HORAS DESCUENTO</field>
            <field name="code">HEXDE</field>
            <field name="category_id" ref="custom_hr_salary_rule_category_taxable"/>
            <field name="struct_id" ref="custom_hr_payroll_structure_cl"/>
            <field name="condition_select">python</field>
            <field name="condition_python">result = inputs.HEXDE and inputs.HEXDE.amount > 0</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">hour_value = (((contract.wage / 30) * 28) / 180) result = (hour_value * inputs.HEXDE.amount) * (-1)</field>
        </record>
        <record id="custom_hr_salary_rule_legal_gratification" model="hr.salary.rule">
            <field name="name">Gratification Legal</field>
            <field name="code">GRAT</field>
            <field name="category_id" ref="custom_hr_salary_rule_category_taxable"/>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = (categories.IMP * 25 / 100)</field>
            <field name="struct_id" ref="custom_hr_payroll_structure_cl"/>
        </record>
        <record id="custom_hr_salary_rule_production_bonus" model="hr.salary.rule">
            <field name="name">Bono de Produccion</field>
            <field name="code">PROD</field>
            <field name="struct_id" ref="custom_hr_payroll_structure_cl"/>
            <field name="condition_select">python</field>
            <field name="condition_python">result = (inputs.PROD and inputs.PROD.amount > 0)</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = inputs.PROD.amount</field>
        </record>
        <record id="custom_hr_salary_rule_comissions" model="hr.salary.rule">
            <field name="name">Comisiones</field>
            <field name="code">COMI</field>
            <field name="struct_id" ref="custom_hr_payroll_structure_cl"/>
            <field name="category_id" ref="custom_hr_salary_rule_category_taxable"/>
            <field name="condition_select">python</field>
            <field name="condition_python">result = (inputs.COMI and inputs.COMI.amount > 0)</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = inputs.COMI.amount</field>
        </record>
        <record name="custom_hr_salary_rule_manual_gratifition_legal" model="hr.salary.rule">
            <field name="name">Gratificion Legal Manual</field>
            <field name="code">MANGRAT</field>
            <field name="struct_id" ref="custom_hr_payroll_structure_cl"/>
            <field name="category_id" ref="custom_hr_salary_rule_category_taxable"/>
            <field name="condition_select">python</field>
            <field name="condition_python">result = (inputs.MANGRAT and inputs.MANGRAT.amount > 0)</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = inputs.MANGRAT.amount</field>
        </record>
        <record name="custom_hr_salary_rule_bonus" model="hr.salary.rule">
            <field name="name">Aguinaldo</field>
            <field name="code">AGUI</field>
            <field name="struct_id" ref="custom_hr_payroll_structure_cl"/>
            <field name="condition_select">python</field>
            <field name="condition_python">result = (inputs.AGUI and inputs.AGUI.amount > 0)</field>
            <field name="amount_python_compute">result = inputs.AGUI.amount</field>
        </record>
        <record name="custom_hr_salary_rule_taxable_total" model="hr.salary.rule">
            <field name="name">Total Imponible</field>
            <field name="code">TOTIM</field>
            <field name="struct_id" ref="custom_hr_payroll_structure_cl"/>
            <field name="category_id" ref="custom_hr_salary_rule_subtotal"/>
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = round(categories.IMP)</field>
        </record>
        <record name="custom_hr_salary_rule_household_allowance" model="hr.salary.rule">
            <field name="name">Asignacion Familiar</field>
            <field name="code">ASIGFAM</field>
            <field name="category_id" ref="custom_hr_salary_rule_category_not_taxable"/>
            <field name="struct_id" ref="custom_hr_payroll_structure_cl"/>
            <field name="condition_select">python</field>
            <field name="condition_python">result = ((contract.simple_charge != 0) or (contract.maternal_charge != 0) or (contract.disability_charge != 0)) &amp; (contract.is_pensionary is False)</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">charges = contract.simple_charge + contract.maternal_charge + contract.disability_charge
            result = contract.frame_id.value * charge
            </field>
        </record>
    </data>
</odoo>
